package com.github.ptosda.projectvalidationmanager.database.entities

import java.io.Serializable
import javax.persistence.*

@Entity
@Table(name = "Vulnerability")
data class Vulnerability(
        @Id
        val id: Long,

        val title: String,

        @Column(columnDefinition = "TEXT")
        val description: String,

        @ElementCollection
        @CollectionTable(name = "Vulnerability_Info",
                joinColumns = [JoinColumn(name = "vulnerability_id", referencedColumnName = "id")]
        )
        @Column(name = "info")
        val info: List<String>,

        @OneToMany(mappedBy = "pk.vulnerability", cascade = [CascadeType.ALL])
        val dependencies: Set<DependencyVulnerability>
) : Serializable
{
        override fun hashCode(): Int {
                return this.id.hashCode() * 41
        }
}