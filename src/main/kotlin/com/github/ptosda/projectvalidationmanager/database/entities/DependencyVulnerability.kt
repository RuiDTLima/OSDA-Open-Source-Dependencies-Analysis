package com.github.ptosda.projectvalidationmanager.database.entities

import java.io.Serializable
import javax.persistence.Column
import javax.persistence.EmbeddedId
import javax.persistence.Entity
import javax.persistence.Transient

@Entity
data class DependencyVulnerability(
        @EmbeddedId
        val pk: DependencyVulnerabilityPk,

        @Column(columnDefinition = "TEXT")
        val versionCriteria: String,

        val sourceDependency : String
) : Serializable
{
    @Transient
    var ignored = false
        get() {
            val project = pk.dependency.pk.report.pk.project
            val vulnerability = pk.vulnerability
            return project.ignoredVulnerabilities!!.contains(vulnerability)
        }
}